<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>温室大棚控制系统_环境信息</title>
</head>
<script>
/*****LedOn********/
function LedOn()
{
	var xmlhttp;
	var led_state = document.getElementById("led_state");
	if (window.XMLHttpRequest)
	{
		// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			//document.getElementById("led_state").innerHTML=xmlhttp.responseText;
			led_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?led=on",true);
	xmlhttp.send();
}
/*******LedOff************/
function LedOff()
{
	var xmlhttp;
	var led_state = document.getElementById("led_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
		//	document.getElementById("led_state").innerHTML=xmlhttp.responseText;
			led_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?led=off",true);
	xmlhttp.send();
}
/**************LedShow******************/
function LedShow()
{
	var xmlhttp;
	var led_state = document.getElementById("led_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			//document.getElementById("led_state").innerHTML=xmlhttp.responseText;
			led_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?ledshow",true);
	xmlhttp.send();
	setTimeout("LedShow()", 1000); 	
}
/************风扇控制监听函数**************/
/************FanOn**************/
function FanOn()
{
	var xmlhttp;
	var fan_state = document.getElementById("fan_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			//document.getElementById("led_state").innerHTML=xmlhttp.responseText;
			fan_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?fan=on",true);
	xmlhttp.send();
}
/*******FanOff************/
function FanOff()
{
	var xmlhttp;
	var fan_state = document.getElementById("fan_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			fan_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?fan=off",true);
	xmlhttp.send();
}
/*************FanShow*************/
function FanShow()
{
	var xmlhttp;
	var fan_state = document.getElementById("fan_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			//document.getElementById("led_state").innerHTML=xmlhttp.responseText;
			fan_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?fanshow",true);
	xmlhttp.send();
	setTimeout("FanShow()", 1000); 	
}
/*******蜂鸣器监听函数**********/
/************BuzzerOn**************/
function BuzzerOn()
{
	var xmlhttp;
	var buzzer_state = document.getElementById("buzzer_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			buzzer_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?buzzer=on",true);
	xmlhttp.send();
}
/*******BuzzerOff************/
function BuzzerOff()
{
	var xmlhttp;
	var buzzer_state = document.getElementById("buzzer_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			buzzer_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?buzzer=off",true);
	xmlhttp.send();
}
/************BuzzerShow************/
function BuzzerShow()
{
	var xmlhttp;
	var buzzer_state = document.getElementById("buzzer_state");
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			//document.getElementById("led_state").innerHTML=xmlhttp.responseText;
			buzzer_state.value = xmlhttp.responseText;
		}
	}
	xmlhttp.open("POST","/index.html?buzzershow",true);
	xmlhttp.send();
	setTimeout("BuzzerShow()", 1000); 	
}
/*****************环境信息**************************/
/****温度显示***/
var tmp_cmd = 0;
function showtemp()
{	
	var tmp_xmlhttp;	
	if (window.XMLHttpRequest)
	{
		tmp_xmlhttp=new XMLHttpRequest();
	}
	else
	{
		tmp_xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	
	tmp_xmlhttp.open("POST","/index.html?tempshow",true);
	tmp_xmlhttp.send();
	
	var tempshow = document.getElementById("tempshow");
	var TMP = document.getElementById("TMP");
	
		
	tmp_xmlhttp.onreadystatechange=function()
	{
		if (tmp_xmlhttp.readyState==4 && tmp_xmlhttp.status==200)
		{	
			if(TMP.value == "ON")  
				tempshow.value = tmp_xmlhttp.responseText;
			else
				tempshow.value = "";	
		}		
	} 
	if(tmp_cmd == 1)
		setTimeout("showtemp()", 1000); 				
}

function TempShow(obj)
{
	var OBJ = document.getElementById(obj.id);
	if(OBJ.value == "ON")
		OBJ.value = "OFF";
	else
		OBJ.value = "ON";
		
	var TMP = document.getElementById("TMP");
	var tempshow = document.getElementById("tempshow");
	
	if(TMP.value == "ON")
		if(tmp_cmd == 0)
		{
			 tmp_cmd = 1;
			 showtemp();
		}
		else
		{
			showtemp();
		}
	else
	{
		tempshow.value = "";
		tmp_cmd = 0;
	}
				
}

/*******湿度显示*******/
var rh_cmd = 0;
function showrh()
{
	var xmlhttp;
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	
	xmlhttp.open("POST","/index.html?rhshow",true);
	xmlhttp.send();	
	
	var rhshow = document.getElementById("rhshow");
	var RH = document.getElementById("RH");
	
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			if(RH.value == "ON")
			{	
				rhshow.value = xmlhttp.responseText;			
			}
			else
			{	
				rhshow.value = "";
			}
		}		
	} 	
	
	if(rh_cmd == 1)
		setTimeout("showrh()",1000);
}

function RhShow(obj)
{	
	var OBJ = document.getElementById(obj.id);
	if(OBJ.value == "ON")
		OBJ.value = "OFF";
	else
		OBJ.value = "ON";
		
	var RH = document.getElementById("RH");	
	var rhshow = document.getElementById("rhshow");

	if(RH.value == "ON")
		if(rh_cmd == 0)
		{
			rh_cmd = 1;
			showrh();		
		}
		else
		{
			showrh();	
		}
	else
	{	
		rhshow.value = "";
		rh_cmd = 0;
	}
}

/***************光照显示**************/
var cd_cmd;
function showlight()
{	
	var xmlhttp;
	if (window.XMLHttpRequest)
	{
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	
	xmlhttp.open("POST","/index.html?lightshow",true);
	xmlhttp.send();	
	
	var lightshow = document.getElementById("lightshow");
	var CD = document.getElementById("CD");
	
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{
			if(CD.value == "ON")
				lightshow.value = xmlhttp.responseText;	
			else
				lightshow.value = "";						
		}		
	} 	
	if(cd_cmd == 1);
		setTimeout("showlight()",1000);
}

function LightShow(obj)
{
	var OBJ = document.getElementById(obj.id);
	if(OBJ.value == "ON")
		OBJ.value = "OFF";
	else
		OBJ.value = "ON";

	var CD = document.getElementById("CD");
	var lightshow = document.getElementById("lightshow");
				
	if(CD.value == "ON")
		if(cd_cmd == 0)
		{
			cd_cmd = 1;
			showlight();
		}
		else
		{
			showlight();
		}
	else
	{	
		lightshow.value = "";
		cd_cmd = 0;
	}					
}

/*************/
</script>

<body background="/?beijing2">
<div style="text-align:center; height:150px; width:1350px">
<br />
     <h1><font style="font-size:45px"><b>温室大棚控制系统</b></font></h1>
</div>

<table width="1350" height="429" border="1">
  <tr>
    <th width="218" height="423" scope="row"><br/>
      <div text style="font-size:24px; height:400px" ><ul>
          <li style="float:left"><a href="introduce.html">大棚简介</a></li><br/><br/>
          <li style="float:left"><a href="env.html">环境信息</a></li><br/><br/>
          <li style="float:left"><a href="video.html">实时监控</a></li><br/><br/>
          <li style="float:left"><a href="mailto:1182813588@qq.com">Call me</a></li><br/></ul></div>
	</th>
    <td width="1108">
      
      <div style="height:75px">
            <h2><strong>&nbsp;&nbsp;Greenhouse System</strong></h2>
        	<h3><em>&nbsp;&nbsp;real-time enviroment information </em></h3></div>
        <div style="height:200px">	
			
            <p style="color:#000; padding-left:80px">
			光照显示
			<input type="text" id="lightshow" value="readonly" style="width:100px; height:25px"/>&nbsp;&nbsp;
			<input type="button" id="CD" onclick="LightShow(this)" value="OFF" style="width:60px; height:30px"/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
			照明控制
			<input type="button" value="ON " onClick="LedOn()"/>
			<input type="button" value="OFF" onClick="LedOff()"/>
            <input type="button" value="SHOW" onClick="LedShow()"/>
            <input type="text" id="led_state" value="" style="width:100px; height:25px"/></p>
            
			<p style="color:#000; padding-left:80px">
			温度显示
			<input type="text" id="tempshow" value="readonly" style="width:100px; height:25px" />&nbsp;&nbsp;
			<input  type="button" id="TMP" onclick="TempShow(this)" value="OFF" style="width:60px; height:30px" />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
			风扇控制
            <input type="button" id="fanon" value="ON " onClick="FanOn()"/>
			<input type="button" id="fanoff" value="OFF" onclick="FanOff()"/>
            <input type="button" value="SHOW" onClick="FanShow()"/>
            <input type="text" id="fan_state" value="" style="width:100px; height:25px"/></p>
            
			<p style="color:#000; padding-left:80px">
			湿度显示
			<input type="text" id="rhshow" value="readonly" style="width:100px; height:25px"/>&nbsp;&nbsp;
			<input type="button" id="RH" onclick="RhShow(this)" value="OFF" style="width:60px; height:30px"/>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
			手动报警
            <input type="button" id="buzzeron" value="ON " onclick="BuzzerOn()"/>
			<input type="button" id="buzzeroff" value="OFF" onclick="BuzzerOff()"/>
            <input type="button" value="SHOW" onClick="BuzzerShow()"/>
            <input type="text" id="buzzer_state" value="" style="width:100px; height:25px"/>
            </p></div>
		
	</td>
  </tr>
</table>

<div align="center" style="height:55px; width:1350px"><br/>
   版权信息© 2016 Intelligent Greenhouse System Of Hello World
</div>

</body>
</html>
